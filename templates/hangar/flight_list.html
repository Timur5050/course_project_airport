{% extends "base.html" %}

{% load crispy_forms_tags %}
{% load static %}

{% block content %}

<style>
  html, body {
      height: 100%;
      margin: 0;
      background-color: #121212; /* Темний фон для всього тіла */
      color: white; /* Світлий текст для контенту */
  }

  .background-image {
      background-image: url('{% static "images/for_flights.jpg" %}');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      height: 100vh;
      width: 100vw;
      position: absolute;
      top: 0;
      left: 0;
      display: flex;
      flex-direction: column;
  }

  .container {
      position: relative;
      z-index: 1;
      background-color: rgba(31, 31, 31, 0.8); /* Напівпрозорий фон для контейнера */
      padding: 20px; /* Внутрішній відступ */
      border-radius: 10px; /* Закруглення кутів */
  }

  .form-inline {
      background-color: #1f1f1f; /* Темний фон для форми */
      border-radius: 5px; /* Закруглення кутів */
      padding: 10px; /* Додайте внутрішній відступ */
      display: flex;
      align-items: center; /* Вирівнювання елементів по центру */
  }

  .form-group {
      margin-right: 1rem; /* Відстань між елементами форми */
  }

  .btn-outline-info {
      color: #17a2b8; /* Світлий колір для кнопок */
      border-color: #17a2b8; /* Обводка кнопки */
  }

  .btn-outline-info:hover {
      background-color: #17a2b8; /* Зміна фону кнопки при наведенні */
      color: white; /* Зміна кольору тексту кнопки при наведенні */
  }

  .list-group-item {
      background-color: #1f1f1f; /* Темний фон для елементів списку */
      border: none; /* Без обводки */
  }

  .list-group-item:hover {
      background-color: #333; /* Зміна фону елемента при наведенні */
  }

  .pagination .page-link {
      color: #17a2b8; /* Колір тексту для пагінації */
  }

  .pagination .page-link:hover {
      background-color: #17a2b8; /* Зміна фону кнопки пагінації при наведенні */
      color: white; /* Зміна кольору тексту при наведенні */
  }

  .pagination .page-item.disabled .page-link {
      background-color: #1f1f1f; /* Колір для неактивних кнопок */
      color: #ccc; /* Колір тексту для неактивних кнопок */
  }
</style>

<div class="background-image">
  <div class="container mt-4">
    <!-- Search Form -->
    <form action="" method="get" class="form-inline mb-4 p-4 rounded shadow-sm d-flex">
      <div class="form-group mb-0 mr-2"> <!-- Change margin-bottom to 0 for better alignment -->
        {{ search_form|crispy }}
      </div>
      <div class="form-group mb-0 mr-2"> <!-- Change margin-bottom to 0 for better alignment -->
        {{ search_form_destination|crispy }}
      </div>
      <button type="submit" class="btn btn-outline-info">
        <i class="fas fa-search"></i> Search
      </button>
      <button type="reset" class="btn btn-outline-info ml-2" onclick="resetSearch()">
        <i class="fas fa-eraser"></i> Clear Search
      </button>
    </form>

    <!-- Flight List -->
    <div class="mb-4">
      <ul class="list-group">
        {% for flight in flight_list %}
        <li class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
          <a href="{% url 'hangar:flight-details' pk=flight.id %}" class="text-decoration-none text-light">
            {{ flight.new_name }}
          </a>
          <span class="badge badge-info badge-pill">{{ flight.code }}</span>
        </li>
        {% empty %}
        <li class="list-group-item text-center">No flights available</li>
        {% endfor %}
      </ul>
    </div>

    <!-- Pagination -->
    <nav aria-label="Page navigation">
      <ul class="pagination justify-content-center">
        {% if page_obj.has_previous %}
        <li class="page-item">
          <a class="page-link" href="?page=1{% if search_name %}&name={{ search_name }}{% endif %}" aria-label="First">
            <span aria-hidden="true">&laquo;&laquo;</span>
          </a>
        </li>
        <li class="page-item">
          <a class="page-link" href="?page={{ page_obj.previous_page_number }}{% if search_name %}&name={{ search_name }}{% endif %}" aria-label="Previous">
            <span aria-hidden="true">&laquo;</span>
          </a>
        </li>
        {% endif %}

        <li class="page-item disabled">
          <span class="page-link">Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}</span>
        </li>

        {% if page_obj.has_next %}
        <li class="page-item">
          <a class="page-link" href="?page={{ page_obj.next_page_number }}{% if search_name %}&name={{ search_name }}{% endif %}" aria-label="Next">
            <span aria-hidden="true">&raquo;</span>
          </a>
        </li>
        <li class="page-item">
          <a class="page-link" href="?page={{ page_obj.paginator.num_pages }}{% if search_name %}&name={{ search_name }}{% endif %}" aria-label="Last">
            <span aria-hidden="true">&raquo;&raquo;</span>
          </a>
        </li>
        {% endif %}
      </ul>
    </nav>
  </div>
</div>

<script>
  function resetSearch() {
    document.querySelector('form').reset();
    window.location.href = window.location.pathname; // Refresh the page
  }
</script>

{% endblock %}
